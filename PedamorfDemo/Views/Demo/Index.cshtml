@{
    
}
<style type="text/css">
    input[type="text"], textarea { width: 250px; }
    #ifDemoOutput { width: 100%; height: 500px; overflow: auto; border: none; display: none; }
    #downloadLink { display: none; }
    #fsOutput { height: 550px; }
    #fsOutput .centered { padding-top: 200px; width: 100%; text-align: center; }
    #ifUpload { display: none; }
    .pending { display: none; }
    .output { display: none; }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $("#ifDemoOutput").hide();

        $("#btnUrl").click(function () {
            PedamorfDemo.convert("url", $("#txtUrl").val());
        });

        $("#btnHtml").click(function () {
            PedamorfDemo.convert("html", $("#txtHtml").val());
        });

        $("#btnFile").click(function () {
            var ifUpload = $('<iframe id="ifUpload" name="ifUpload">');
            ifUpload.load(function () { PedamorfDemo.convert("file", "true"); });
            ifUpload.appendTo("body");
            $("#formUploadFile").attr("target", "ifUpload");
            $("#formUploadFile").submit();
        });

        $('#ifDemoOutput').load(function () {
            $(".pending").hide();
            $(".output").show();
        });
    });

    var PedamorfDemo = {
        convert: function (queryKey, queryValue) {
            $("#initial").hide();
            $(".output").hide();
            $(".pending").show();
            $("#ifDemoOutput").attr("src", encodeURI("ConversionHandler.ashx?host=" + $("#txtServiceHost").val() + "&" + queryKey + "=" + queryValue));
            $("#downloadLink").attr("href", encodeURI("ConversionHandler.ashx?download=true&host=" + $("#txtServiceHost").val() + "&" + queryKey + "=" + queryValue));
        }
    }
</script>
<div>
    <fieldset>
        <legend>Configuration</legend>
        <div>
            <label for="txtServiceHost">
                Service Host:</label>
            <input type="text" id="txtServiceHost" value="localhost" />
            <span>Make sure the service is running!</span>
        </div>
    </fieldset>
    <fieldset>
        <legend>Demos</legend>
        <div style="float: right;">
            <label for="txtUrl">
                Raw Html:</label>
            <textarea id="txtHtml"><h1>My Header</h1><p>This is a test.</p></textarea>
            <div>
                <button id="btnHtml">
                    Convert</button>
            </div>
        </div>
        <div>
            <label for="txtUrl">
                Url:</label>
            <input type="text" id="txtUrl" value="http://www.google.com" />
            <button id="btnUrl">
                Convert</button>
        </div>
        <div>
            <label>
                Document:</label>
            <form action="/Demo/Upload" id="formUploadFile" method="post" enctype="multipart/form-data">
            <input type="file" id="upFile" name="upFile" />
            <button id="btnFile">
                Convert</button>
            </form>
        </div>
    </fieldset>
    <fieldset id="fsOutput">
        <legend>Output</legend>
        <div id="initial" class="centered">
            (Click Convert above)
        </div>
        <div id="loading" class="centered pending">
            <img src="../../Content/loader.gif" />
            <div>
                Converting...</div>
        </div>
        <iframe id="ifDemoOutput" class="output"></iframe>
        <a id="downloadLink" class="output">Download</a>
    </fieldset>
</div>
